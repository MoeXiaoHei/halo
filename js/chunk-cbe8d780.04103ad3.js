(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cbe8d780"],{"05fb":function(t,e,s){},1:function(t,e){},"1bab":function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));s("8237");var a=s("2b0e"),o=s("4328"),i=s.n(o);function n(t,e,s){return new Promise((o,n)=>{let r={data:JSON.stringify(e)};var d="60000";null!=s&&(d=s+"");let l=parseInt(d);t=t+"?"+(new Date).getTime()+Math.random()+Math.ceil(-89999*Math.random()+99999),a.default.prototype.$http.post(t,i.a.stringify(r),{timeout:l}).then(t=>{o(t)}).catch(t=>{n(t)})})}},2048:function(t,e,s){"use strict";var a={name:"table-expand.vue",props:{row:Object},methods:{formatBytes(t,e){if(0==t)return"0 Bytes";var s=e||2,a=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,a)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}},computed:{getMemory:function(){return this.row.memory?this.formatBytes(1024*this.row.memory*1024,2):"0B"}}},o=(s("7130"),s("2877")),i=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[t._v("注册日期: ")]),s("span",{staticClass:"expand-value"},[t._v(t._s(t.row.birthder))])]),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[t._v("用户组: ")]),s("span",{staticClass:"expand-value"},[t._v(t._s(t.row.groupname))])]),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[t._v("密码: ")]),s("span",{staticClass:"expand-value"},[t._v(t._s(t.row.password))])])],1),s("Row",[s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[t._v("容量: ")]),s("span",{staticClass:"expand-value"},[t._v(t._s(t.getMemory))])])],1)],1)}),[],!1,null,"38b97399",null);e.a=i.exports},"5a76":function(t,e,s){},7130:function(t,e,s){"use strict";s("05fb")},"90a3":function(t,e,s){"use strict";s("5a76")},bc58:function(t,e,s){"use strict";s.r(e);var a=s("1bab"),o=(s("2048"),{name:"capacity",data(){this.$createElement;return{addLoading:!1,isAdd:!1,loading:!1,pageNum:1,pageSize:20,total:0,formItem:{count:10,memory:1024},bucketlist:[],columns:[{type:"selection",width:55,align:"center"},{title:"编号",width:100,key:"id"},{title:"扩容量(M)",width:200,minWidth:150,render:(t,e)=>e.row.value>0?t("span",{},this.formatBytes(e.row.value,2)):t("span",["0B"])},{title:"扩容码",minWidth:400,key:"code"},{title:"操作",align:"center",width:120,key:"action",slot:"action"}],codeList:[],codeIdList:[]}},mounted(){this.$Spin.show(),this.getCodeList(),this.$Spin.hide()},methods:{selectCode(t){t.length>0?this.codeIdList=t:this.codeIdList=[]},toPageIndex(t){this.pageNum=t,this.getCodeList()},toPageSize(t){console.log(t)},getCodeList(){this.loading=!0;var t={};t.pageNum=this.pageNum,t.pageSize=this.pageSize,this.codeList=[],Object(a.a)("/admin/root/selectCodeList",t).then(t=>{if(200==t.status){var e=t.data.data.list;this.total=t.data.count,e.length>0?this.codeList=e:console.log("没有数据")}else this.$Message.error("请求时出现错误");this.loading=!1}).catch(t=>{this.loading=!1,console.log(t),this.$Message.error("服务器请求错误")})},showAdd(){this.isAdd=!0},copyCode(){var t=new this.clipboard(".cobyOrderSn");t.on("success",e=>{this.$Message.success("复制成功"),t.destroy()}),t.on("error",e=>{console.log(e),this.$Message.error("该浏览器不支持自动复制"),t.destroy()})},addCodeList(){Number(this.formItem.memory)<=0||Number(this.formItem.memory)>1048576?this.$Message.warning("请输入正确的容量值:1~1048576"):Number(this.formItem.count)<=0||Number(this.formItem.count)>1e3?this.$Message.warning("请输入正确的生成数量:1~1000"):(this.addLoading=!0,Object(a.a)("/admin/root/addCode",this.formItem).then(t=>{this.addLoading=!1,200==t.status&&("200"==t.data.code?(this.$Message.success(t.data.info),this.getCodeList(),this.isAdd=!1):this.$Message.warning(t.data.info))}).catch(t=>{this.addLoading=!1,console.log(t),this.$Message.error("服务器请求错误")}))},deleCodes(t){this.$Modal.confirm({title:"确认删除",content:"<p>您确认删除所选扩容码信息吗</p>",onOk:()=>{this.sendDeleCodes(t)},onCancel:()=>{}})},deleSelectCodes(){if(0==this.codeIdList.length)return this.$Message.warning("请先选择要操作的数据"),!1;this.$Modal.confirm({title:"确认删除",content:"<p>您确认删除所选扩容码信息吗</p>",onOk:()=>{this.sendDeleCodes()},onCancel:()=>{}})},sendDeleCodes(t){this.loading=!0;var e={};if(null==t){if(0==this.codeIdList.length)return this.$Message.warning("所选数据丢失，不可操作"),!1}else this.codeIdList=[],this.codeIdList.push(t);e.arr=this.codeIdList,Object(a.a)("/admin/root/deleteCodes",e).then(t=>{200==t.status?"200"==t.data.code?(this.$Message.success(t.data.info),this.codeIdList=[],this.getCodeList()):this.$Message.warning(t.data.info):this.$Message.error("请求时出现错误"),this.loading=!1}).catch(t=>{this.loading=!1,console.log(t),this.$Message.error("服务器请求错误")})},formatBytes(t,e){if(0==t)return"0 Bytes";var s=e||2,a=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,a)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}},computed:{getMemory:function(){return this.row.memory?this.formatBytes(1024*this.row.memory*1024,2):"0B"}}}),i=(s("90a3"),s("2877")),n=Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Layout",{staticStyle:{"margin-top":"50px","margin-bottom":"50px"}},[s("Content",{style:{margin:"15px 20px 0"}},[s("p",{staticStyle:{position:"fixed",right:"58px","z-index":"1",bottom:"68px"}},[s("Dropdown",{staticStyle:{"z-index":"1","box-shadow":"rgba(0, 0, 0, 0.4) 0px 2px 6px 0px","border-radius":"50%"},attrs:{trigger:"click"}},[s("Button",{attrs:{type:"primary",shape:"circle"}},[t._v(" 操 作 "),s("Icon",{attrs:{type:"ios-arrow-down"}})],1),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{nativeOn:{click:function(e){return t.deleSelectCodes.apply(null,arguments)}}},[s("Icon",{attrs:{type:"md-trash"}}),t._v(" 删除选中")],1),s("DropdownItem",{nativeOn:{click:function(e){return t.showAdd.apply(null,arguments)}}},[s("Icon",{attrs:{type:"md-add-circle"}}),t._v("添 加")],1)],1)],1)],1),s("Card",{staticClass:"cardShadow",staticStyle:{"margin-top":"10px","padding-left":"8px","padding-right":"8px"}},[s("Table",{ref:"selection",attrs:{loading:t.loading,columns:t.columns,data:t.codeList},on:{"on-selection-change":t.selectCode},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row,o=e.index;return[s("Icon",{attrs:{type:"ios-copy tablebut cobyOrderSn",data:o,title:"复制","data-clipboard-action":"copy","data-clipboard-text":a.code},on:{click:t.copyCode}}),s("Icon",{attrs:{type:"md-trash tablebut",title:"删除"},on:{click:function(e){return t.deleCodes(a)}}})]}}])},[s("Switch",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})]),s("div",{staticStyle:{"margin-top":"20px"}},[s("Page",{attrs:{total:t.total,"page-size":t.pageSize},on:{"on-change":t.toPageIndex,"on-page-size-change":t.toPageSize}})],1)],1)],1),s("Footer",{staticClass:"layout-footer-center"},[t._v(t._s(this.$store.state.metaInfo.webname)+" © Control Panel")]),s("Modal",{attrs:{"footer-hide":!0},model:{value:t.isAdd,callback:function(e){t.isAdd=e},expression:"isAdd"}},[s("br"),s("Form",{attrs:{"label-width":80},nativeOn:{submit:function(t){t.preventDefault()}}},[s("FormItem",{attrs:{label:"生成数量"}},[s("Input",{attrs:{type:"number",placeholder:"生成的扩容码数量",size:"large"},model:{value:t.formItem.count,callback:function(e){t.$set(t.formItem,"count",e)},expression:"formItem.count"}})],1),s("FormItem",{attrs:{label:"单位容量"}},[s("Input",{attrs:{type:"number",placeholder:"每个扩容码的容量,最大1048576",size:"large"},model:{value:t.formItem.memory,callback:function(e){t.$set(t.formItem,"memory",e)},expression:"formItem.memory"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("M")])])],1),s("Button",{attrs:{type:"primary",icon:"md-done-all",long:"",shape:"circle",loading:t.addLoading},on:{click:t.addCodeList}},[t._v("生 成")])],1)],1)],1)}),[],!1,null,null,null);e.default=n.exports}}]);