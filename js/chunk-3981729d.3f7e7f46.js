(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3981729d"],{"0696":function(e,t,a){e.exports=a.p+"img/2.06c97a0b.png"},1:function(e,t){},"1bab":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("8237");var s=a("2b0e"),i=a("4328"),n=a.n(i);function r(e,t,a){return new Promise((i,r)=>{let o={data:JSON.stringify(t)};var c="60000";null!=a&&(c=a+"");let d=parseInt(c);e=e+"?"+(new Date).getTime()+Math.random()+Math.ceil(-89999*Math.random()+99999),s.default.prototype.$http.post(e,n.a.stringify(o),{timeout:d}).then(e=>{i(e)}).catch(e=>{r(e)})})}},"1e8e":function(e,t,a){e.exports=a.p+"img/1.76cb853c.png"},"6c6c":function(e,t,a){"use strict";a("ec35")},"737b":function(e,t,a){var s={"./1.png":"1e8e","./2.png":"0696","./3.png":"dfa6","./4.png":"a99e","./5.png":"7fdf","./6.png":"7ddb","./7.png":"d78f","./8.png":"b2e7"};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id="737b"},"7ddb":function(e,t,a){e.exports=a.p+"img/6.c6f8209d.png"},"7fdf":function(e,t,a){e.exports=a.p+"img/5.8ca955bd.png"},a99e:function(e,t,a){e.exports=a.p+"img/4.517c4aa5.png"},b2e7:function(e,t,a){e.exports=a.p+"img/8.4fc0cd48.png"},bad6:function(e,t,a){"use strict";a.r(t);var s=a("1bab"),i=a("ec1b"),n={name:"storage",components:{countTo:a.n(i).a},data:()=>({id:null,addAccessKey:null,addAccessSecret:null,addEndpoint:null,addBucketname:null,addRequestAddress:null,addkeyname:null,bucketType:null,storageWindow:!1,viewType:"edit",bucketlist:[],storageList:[],loadInfo:[],bucketArr:[{id:2,storageType:1,keyname:"网易云",storageName:"网易云"},{id:1,storageType:2,keyname:"阿里云",storageName:"阿里云"},{id:3,storageType:3,keyname:"又拍",storageName:"又拍云"},{id:4,storageType:4,keyname:"七牛云",storageName:"七牛云"},{id:5,storageType:5,keyname:"Localhost",storageName:"本地"},{id:6,storageType:6,keyname:"腾讯云a",storageName:"腾讯云"},{id:13,storageType:7,keyname:"FTP",storageName:"FTP"},{id:8,storageType:8,keyname:"UFile",storageName:"UFile"}]}),mounted(){this.$Spin.show(),this.getStorage(),this.getKeys(),this.$Spin.hide()},methods:{selectStorageType(e){this.addAccessKey=null,this.addAccessSecret=null,this.addEndpoint=null,this.addBucketname=null,this.addRequestAddress=null,this.addkeyname=null},getStorage(){Object(s.a)("/admin/getStorage",{}).then(e=>{200==e.status&&(this.bucketlist=e.data.data)}).catch(e=>{console.log(e),this.$Message.error("服务器请求错误")})},getKeys(){Object(s.a)("/admin/root/getKeysList",{}).then(e=>{200==e.status&&(this.storageList=e.data.data,this.getLoadInfo())}).catch(e=>{console.log(e),this.$Message.error("服务器请求错误")})},getLoadInfo(){for(let t=0;t<this.storageList.length;t++){var e={keyId:this.storageList[t].id};Object(s.a)("/admin/root/LoadInfo",e).then(e=>{200==e.status&&this.loadInfo.push(e.data.data)}).catch(e=>{console.log(e)})}},takeEffect(e){var t=!1;for(let a=0;a<this.loadInfo.length;a++)if(this.loadInfo[a].id==e){if(1==this.loadInfo[a].isok){t=!0;break}t=!1;break}return t},usedCapacity(e){var t="";for(let a=0;a<this.loadInfo.length;a++)if(this.loadInfo[a].id==e){t=this.loadInfo[a].usedCapacity;break}return 0==t?"0B ":t},getBucketName(e){for(let t=0;t<this.bucketlist.length;t++)if(e==this.bucketlist[t].storageType)return this.bucketlist[t].storageName},save(){if(null!=this.bucketType){if(1==this.bucketType||2==this.bucketType||4==this.bucketType||6==this.bucketType){if(!(this.addAccessKey&&this.addAccessSecret&&this.addEndpoint&&this.addBucketname&&this.addRequestAddress))return void this.$Message.warning("相关参数不能为空")}else if(3==this.bucketType||8==this.bucketType){if(!(this.addAccessKey&&this.addAccessSecret&&this.addBucketname&&this.addRequestAddress))return void this.$Message.warning("相关参数不能为空")}else if(7==this.bucketType&&!(this.addAccessKey&&this.addAccessSecret&&this.addEndpoint&&this.addRequestAddress))return void this.$Message.warning("相关参数不能为空");if(this.addkeyname){this.$Spin.show();var e={};e.storageType=this.bucketType,e.AccessKey=this.addAccessKey,e.AccessSecret=this.addAccessSecret,e.Endpoint=this.addEndpoint,e.Bucketname=this.addBucketname,e.RequestAddress=this.addRequestAddress,e.keyname=this.addkeyname,Object(s.a)("/admin/root/updateStorage",e).then(e=>{this.$Spin.hide(),200==e.status?"200"==e.data.code?(this.storageList=[],this.getKeys(),this.storageWindow=!1,this.$Message.success(e.data.info)):this.$Message.warning(e.data.info):this.$Message.error("请求时出现错误")}).catch(e=>{this.storageWindow=!1,this.$Spin.hide(),console.log(e),this.$Message.error("服务器请求错误")})}else this.$Message.warning("请填写存储策略名称")}else this.$Message.warning("请选择存储源")},getStorageById(e){this.$Modal.confirm({title:"修改提醒：",okText:"我明白",cancelText:"点错了",content:"注意！如果把当前存储源修改为其他存储源，将导致当前存储源上传过的所有图像无法删除。",onOk:()=>{this.viewType="edit",this.sendGetStorageById(e)}})},sendGetStorageById(e){var t={};e||this.$Message.error("修改指令不存在"),t.id=e,Object(s.a)("/admin/root/getStorageById",t).then(t=>{if(200==t.status){if(this.id=e,"200"==t.data.code){let e=t.data.data;this.addAccessKey=e.accessKey,this.addAccessSecret=e.accessSecret,this.addEndpoint=e.endpoint,this.addBucketname=e.bucketname,this.addRequestAddress=e.requestAddress,this.addkeyname=e.keyname,this.bucketType=e.storageType,this.storageWindow=!0}}else this.$Message.error("请求时出现错误")}).catch(e=>{console.log(e),this.$Message.error("服务器请求错误")})}},computed:{isOkSwitch:{get(){return this.cos},set(e){console.log("****************"+e)}}}},r=(a("6c6c"),a("2877")),o=Object(r.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticStyle:{"margin-top":"50px","margin-bottom":"50px"}},[s("Content",{style:{margin:"15px 20px 0"}},[s("Row",{attrs:{gutter:16}},e._l(e.storageList,(function(t,i){return s("Col",{key:i,attrs:{flex:"1"}},[s("Card",{staticStyle:{"margin-top":"10px","min-width":"300px"},attrs:{bordered:!0,shadow:!0}},[s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{width:"80px"},attrs:{src:a("737b")("./"+t.storageType.toString()+".png")}}),s("p",{staticStyle:{color:"#545454","font-size":"14px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"130px",margin:"auto"}},[e._v(e._s(t.keyname))])]),s("div",{staticClass:"stostyle"},[s("Tag",{attrs:{color:"primary"}},[e._v(e._s(e.usedCapacity(t.id)))]),e.takeEffect(t.id)||5==t.storageType?s("Tag",{attrs:{color:"success"}},[e._v("可用")]):s("Tag",{attrs:{color:"error"}},[e._v("停用")]),s("p",{staticStyle:{"margin-top":"10px"}},[s("a",{on:{click:function(a){return e.getStorageById(t.id)}}},[e._v("编辑")])])],1)])],1)})),1)],1),s("Modal",{attrs:{"footer-hide":!0},model:{value:e.storageWindow,callback:function(t){e.storageWindow=t},expression:"storageWindow"}},[s("br"),s("Form",{nativeOn:{submit:function(e){e.preventDefault()}}},[s("FormItem",[s("Select",{attrs:{disabled:"edit"==this.viewType,filterable:"",placeholder:"存储源",size:"large"},on:{"on-change":e.selectStorageType},model:{value:e.bucketType,callback:function(t){e.bucketType=t},expression:"bucketType"}},e._l(e.bucketArr,(function(t){return s("Option",{key:t.storageType,attrs:{value:t.storageType}},[e._v(e._s(t.storageName))])})),1)],1),null!=e.bucketType?s("div",[1==e.bucketType||2==e.bucketType?s("div",[s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"AccessKey",size:"large"},model:{value:e.addAccessKey,callback:function(t){e.addAccessKey=t},expression:"addAccessKey"}})],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"AccessSecret",size:"large"},model:{value:e.addAccessSecret,callback:function(t){e.addAccessSecret=t},expression:"addAccessSecret"}})],1),s("FormItem",[s("Tooltip",{staticStyle:{width:"100%"},attrs:{content:"需带有http://或https:// 结尾不需要带/","max-width":"200",theme:"light"}},[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"Endpoint(外网)",size:"large"},model:{value:e.addEndpoint,callback:function(t){e.addEndpoint=t},expression:"addEndpoint"}})],1)],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"桶名称",size:"large"},model:{value:e.addBucketname,callback:function(t){e.addBucketname=t},expression:"addBucketname"}})],1)],1):e._e(),6==e.bucketType?s("div",[s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"SecretId",size:"large"},model:{value:e.addAccessKey,callback:function(t){e.addAccessKey=t},expression:"addAccessKey"}})],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"SecretKey",size:"large"},model:{value:e.addAccessSecret,callback:function(t){e.addAccessSecret=t},expression:"addAccessSecret"}})],1),s("FormItem",[s("Tooltip",{staticStyle:{width:"100%"},attrs:{content:"如：北京地区就写ap-beijing",theme:"light"}},[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"地区代码",size:"large"},model:{value:e.addEndpoint,callback:function(t){e.addEndpoint=t},expression:"addEndpoint"}})],1)],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"桶名称",size:"large"},model:{value:e.addBucketname,callback:function(t){e.addBucketname=t},expression:"addBucketname"}})],1)],1):e._e(),3==e.bucketType||8==e.bucketType?s("div",[s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"操作员",size:"large"},model:{value:e.addAccessKey,callback:function(t){e.addAccessKey=t},expression:"addAccessKey"}})],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"操作员密码",size:"large"},model:{value:e.addAccessSecret,callback:function(t){e.addAccessSecret=t},expression:"addAccessSecret"}})],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"桶名称",size:"large"},model:{value:e.addBucketname,callback:function(t){e.addBucketname=t},expression:"addBucketname"}})],1)],1):e._e(),4==e.bucketType?s("div",[s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"AccessKey",size:"large"},model:{value:e.addAccessKey,callback:function(t){e.addAccessKey=t},expression:"addAccessKey"}})],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"SecretKey",size:"large"},model:{value:e.addAccessSecret,callback:function(t){e.addAccessSecret=t},expression:"addAccessSecret"}})],1),s("FormItem",[s("Select",{attrs:{placeholder:"桶地区",size:"large"},model:{value:e.addEndpoint,callback:function(t){e.addEndpoint=t},expression:"addEndpoint"}},[s("Option",{key:"1",attrs:{value:"1"}},[e._v("华东")]),s("Option",{key:"2",attrs:{value:"2"}},[e._v("华北")]),s("Option",{key:"3",attrs:{value:"3"}},[e._v("华南")]),s("Option",{key:"4",attrs:{value:"4"}},[e._v("北美")]),s("Option",{key:"5",attrs:{value:"5"}},[e._v("东南亚")])],1)],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"桶名称",size:"large"},model:{value:e.addBucketname,callback:function(t){e.addBucketname=t},expression:"addBucketname"}})],1)],1):e._e(),7==e.bucketType?s("div",[s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"FTP账号",size:"large"},model:{value:e.addAccessKey,callback:function(t){e.addAccessKey=t},expression:"addAccessKey"}})],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"FTP密码",size:"large"},model:{value:e.addAccessSecret,callback:function(t){e.addAccessSecret=t},expression:"addAccessSecret"}})],1),s("FormItem",[s("Tooltip",{staticStyle:{width:"100%"},attrs:{"max-width":"300",theme:"light"}},[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"FTP地址",size:"large"},model:{value:e.addEndpoint,callback:function(t){e.addEndpoint=t},expression:"addEndpoint"}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[e._v("按格式填写如：127.0.0.1:21不需要添加ftp:// 推荐使用21默认端口")]),s("p",[e._v("修改过得端口先用xftp等客户端工具测试一下能不能链接")])])],1)],1)],1):e._e(),s("FormItem",[s("Tooltip",{staticStyle:{width:"100%"},attrs:{content:"需带有http://或https:// 结尾不需要带/","max-width":"200",theme:"light"}},[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"请求域名",size:"large"},model:{value:e.addRequestAddress,callback:function(t){e.addRequestAddress=t},expression:"addRequestAddress"}})],1)],1),s("FormItem",[s("Input",{staticStyle:{width:"100%"},attrs:{prefix:"ios-create",placeholder:"策略名称",size:"large"},model:{value:e.addkeyname,callback:function(t){e.addkeyname=t},expression:"addkeyname"}})],1)],1):s("div",{staticStyle:{"min-height":"130px","text-align":"center",color:"#9ea7b4","line-height":"35px"}},[s("p",[e._v(" Hellohao图像托管")]),s("p",[e._v("为获取到正确存储源")])]),s("FormItem",[s("Button",{attrs:{type:"primary",icon:"md-done-all",long:"",shape:"circle"},on:{click:e.save}},[e._v("保 存")])],1)],1)],1),s("Footer",{staticClass:"layout-footer-center"},[e._v(e._s(this.$store.state.metaInfo.webname)+" © Control Panel")])],1)}),[],!1,null,"e971cc86",null);t.default=o.exports},d78f:function(e,t,a){e.exports=a.p+"img/7.3fd9faff.png"},dfa6:function(e,t,a){e.exports=a.p+"img/3.04ec30df.png"},ec1b:function(e,t,a){e.exports=function(e){function t(s){if(a[s])return a[s].exports;var i=a[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,s){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=2)}([function(e,t,a){var s=a(4)(a(1),a(5),null,null);e.exports=s.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(3);t.default={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator:function(e){return e>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default:function(e,t,a,s){return a*(1-Math.pow(2,-10*e/s))*1024/1023+t}}},data:function(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown:function(){return this.startVal>this.endVal}},watch:{startVal:function(){this.autoplay&&this.start()},endVal:function(){this.autoplay&&this.start()}},mounted:function(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start:function(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=(0,s.requestAnimationFrame)(this.count)},pauseResume:function(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause:function(){(0,s.cancelAnimationFrame)(this.rAF)},resume:function(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,(0,s.requestAnimationFrame)(this.count)},reset:function(){this.startTime=null,(0,s.cancelAnimationFrame)(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count:function(e){this.startTime||(this.startTime=e),this.timestamp=e;var t=e-this.startTime;this.remaining=this.localDuration-t,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(t,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(t,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(t/this.localDuration):this.printVal=this.localStartVal+(this.localStartVal-this.startVal)*(t/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),t<this.localDuration?this.rAF=(0,s.requestAnimationFrame)(this.count):this.$emit("callback")},isNumber:function(e){return!isNaN(parseFloat(e))},formatNumber:function(e){e=e.toFixed(this.decimals);var t=(e+="").split("."),a=t[0],s=t.length>1?this.decimal+t[1]:"",i=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;i.test(a);)a=a.replace(i,"$1"+this.separator+"$2");return this.prefix+a+s+this.suffix}},destroyed:function(){(0,s.cancelAnimationFrame)(this.rAF)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return e&&e.__esModule?e:{default:e}}(a(0));t.default=s.default,"undefined"!=typeof window&&window.Vue&&window.Vue.component("count-to",s.default)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=0,i="webkit moz ms o".split(" "),n=void 0,r=void 0;if("undefined"==typeof window)t.requestAnimationFrame=n=function(){},t.cancelAnimationFrame=r=function(){};else{t.requestAnimationFrame=n=window.requestAnimationFrame,t.cancelAnimationFrame=r=window.cancelAnimationFrame;for(var o=void 0,c=0;c<i.length&&(!n||!r);c++)o=i[c],t.requestAnimationFrame=n=n||window[o+"RequestAnimationFrame"],t.cancelAnimationFrame=r=r||window[o+"CancelAnimationFrame"]||window[o+"CancelRequestAnimationFrame"];n&&r||(t.requestAnimationFrame=n=function(e){var t=(new Date).getTime(),a=Math.max(0,16-(t-s)),i=window.setTimeout((function(){e(t+a)}),a);return s=t+a,i},t.cancelAnimationFrame=r=function(e){window.clearTimeout(e)})}t.requestAnimationFrame=n,t.cancelAnimationFrame=r},function(e,t){e.exports=function(e,t,a,s){var i,n=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(i=e,n=e.default);var o="function"==typeof n?n.options:n;if(t&&(o.render=t.render,o.staticRenderFns=t.staticRenderFns),a&&(o._scopeId=a),s){var c=Object.create(o.computed||null);Object.keys(s).forEach((function(e){var t=s[e];c[e]=function(){return t}})),o.computed=c}return{esModule:i,exports:n,options:o}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",[e._v("\n  "+e._s(e.displayValue)+"\n")])},staticRenderFns:[]}}])},ec35:function(e,t,a){}}]);