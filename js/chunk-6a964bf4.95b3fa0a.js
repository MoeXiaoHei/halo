(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6a964bf4"],{1:function(t,e){},"1bab":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("8237");var i=a("2b0e"),l=a("4328"),s=a.n(l);function o(t,e,a){return new Promise((l,o)=>{let n={data:JSON.stringify(e)};var p="60000";null!=a&&(p=a+"");let r=parseInt(p);t=t+"?"+(new Date).getTime()+Math.random()+Math.ceil(-89999*Math.random()+99999),i.default.prototype.$http.post(t,s.a.stringify(n),{timeout:r}).then(t=>{l(t)}).catch(t=>{o(t)})})}},fe4d:function(t,e,a){"use strict";a.r(e);var i=a("1bab"),l={name:"setting",data:()=>({loading:!1,uploadConfig:{},sysConfig:{},config:{},appclient:{}}),mounted(){this.$Spin.show(),this.getDatas()},methods:{getDatas(){Object(i.a)("/admin/root/getSettingConfig",{}).then(t=>{if(this.$Spin.hide(),200==t.status){var e=t.data.data;"200"==t.data.code?(this.uploadConfig=e.uploadConfig,this.config=e.config,this.sysConfig=e.sysConfig,this.appclient=e.appClient):this.$Message.error("获取数据失败，请稍后再试")}else this.$Message.error("请求时出现错误")}).catch(t=>{console.log(t),this.$Message.error("服务器请求错误")})},SaveConfig(){if(this.loading=!0,null==this.uploadConfig.suffix||""==this.uploadConfig.suffix.replace(/\s*/g,""))return this.$Message.warning("支持的图像格式不能为空"),this.loading=!1,!1;if(null==this.config.webname||""==this.config.webname.replace(/\s*/g,""))return this.$Message.warning("站点名称不能为空"),this.loading=!1,!1;if(null==this.config.domain||""==this.config.domain.replace(/\s*/g,""))return this.$Message.warning("WEB域名不能为空"),this.loading=!1,!1;if(Number(this.uploadConfig.filesizetourists)>5120||Number(this.uploadConfig.filesizeuser)>5120)return this.$Message.warning("单文件大小不得超过5120 MB"),this.loading=!1,!1;if(Number(this.uploadConfig.usermemory)>1048576)return this.$Message.warning("用户初始容量不得超过1048576 MB"),this.loading=!1,!1;if(Number(this.uploadConfig.imgcountuser)>1e3||Number(this.uploadConfig.imgcounttourists)>1e3)return this.$Message.warning("单次上传数量上限为1000"),this.loading=!1,!1;var t={uploadConfig:this.uploadConfig,config:this.config,sysConfig:this.sysConfig,appClient:this.appclient};Object(i.a)("/admin/root/updateConfig",t).then(t=>{this.loading=!1,200==t.status?"200"==t.data.code?this.$Message.success(t.data.info):this.$Message.error(t.data.info):this.$Message.error("请求时出现错误")}).catch(t=>{this.loading=!1,console.log(t),this.$Message.error("服务器请求错误")})}},computed:{isupdateSwitch:{get(){return 1==this.uploadConfig.isupdate},set(t){this.uploadConfig.isupdate=t?1:0}},usercloseSwitch:{get(){return 1==this.uploadConfig.userclose},set(t){this.uploadConfig.userclose=t?1:0}},watermarkSwitch:{get(){return 1==this.uploadConfig.watermark},set(t){this.uploadConfig.watermark=t?1:0}},apiSwitch:{get(){return 1==this.uploadConfig.api},set(t){this.uploadConfig.api=t?1:0}},registerSwitch:{get(){return 1==this.sysConfig.register},set(t){this.sysConfig.register=t?1:0}},guidepageSwitch:{get(){return 1==this.sysConfig.guidepage},set(t){this.sysConfig.guidepage=t?1:0}},checkduplicateSwitch:{get(){return 1==this.sysConfig.checkduplicate},set(t){this.sysConfig.checkduplicate=t?1:0}}}},s=a("2877"),o=Object(s.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{staticStyle:{"margin-top":"50px","margin-bottom":"50px"}},[a("Content",{style:{margin:"15px 20px 0"}},[a("p",{staticStyle:{position:"fixed",right:"58px","z-index":"1",bottom:"68px"}},[a("Button",{staticStyle:{"z-index":"1","margin-right":"8px","box-shadow":"rgba(0, 0, 0, 0.4) 0px 2px 6px 0px"},attrs:{type:"primary",shape:"circle",icon:"md-filing",loading:t.loading},on:{click:t.SaveConfig}},[t._v("保存")])],1),a("Tabs",[a("TabPane",{attrs:{label:"功能配置",icon:"ios-images"}},[a("Row",[a("Col",{staticStyle:{padding:"8px"},attrs:{flex:"1"}},[a("Card",{staticStyle:{"margin-top":"10px","padding-left":"8px","padding-right":"8px","padding-top":"20px"},attrs:{bordered:!0}},[a("Form",{staticStyle:{"min-width":"70px"}},[a("FormItem",{attrs:{label:"游客上传"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.isupdateSwitch,callback:function(e){t.isupdateSwitch=e},expression:"isupdateSwitch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("On")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("Off")])])],1)],1)],1)],1),a("Col",{staticStyle:{padding:"8px"},attrs:{flex:"1"}},[a("Card",{staticStyle:{"margin-top":"10px","padding-left":"8px","padding-right":"8px","padding-top":"20px"},attrs:{bordered:!0}},[a("Form",{staticStyle:{"min-width":"70px"}},[a("FormItem",{attrs:{label:"用户上传"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.usercloseSwitch,callback:function(e){t.usercloseSwitch=e},expression:"usercloseSwitch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("On")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("Off")])])],1)],1)],1)],1),a("Col",{staticStyle:{padding:"8px"},attrs:{flex:"1"}},[a("Card",{staticStyle:{"margin-top":"10px","padding-left":"8px","padding-right":"8px","padding-top":"20px"},attrs:{bordered:!0}},[a("Form",{staticStyle:{"min-width":"70px"}},[a("FormItem",{attrs:{label:"图床API"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.apiSwitch,callback:function(e){t.apiSwitch=e},expression:"apiSwitch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("On")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("Off")])])],1)],1)],1)],1),a("Col",{staticStyle:{padding:"8px"},attrs:{flex:"1"}},[a("Card",{staticStyle:{"margin-top":"10px","padding-left":"8px","padding-right":"8px","padding-top":"20px"},attrs:{bordered:!0}},[a("Form",{staticStyle:{"min-width":"70px"}},[a("FormItem",{attrs:{label:"目录"}},[a("Select",{staticStyle:{width:"70%"},attrs:{placeholder:"目录格式"},model:{value:t.uploadConfig.urltype,callback:function(e){t.$set(t.uploadConfig,"urltype",e)},expression:"uploadConfig.urltype"}},[a("Option",{attrs:{value:1}},[t._v("/用户名")]),a("Option",{attrs:{value:2}},[t._v("/年/月/日")])],1)],1)],1)],1)],1)],1),a("Row",[a("Col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:"24"}},[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-contacts-outline",size:"18"}}),t._v(" 访客相关设置")],1),a("Row",[a("Col",{attrs:{flex:"1"}},[a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"访客可用总量"}},[a("Input",{staticStyle:{width:"130px"},model:{value:t.uploadConfig.visitormemory,callback:function(e){t.$set(t.uploadConfig,"visitormemory",e)},expression:"uploadConfig.visitormemory"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("Mb")])])],1)],1)],1),a("Col",{attrs:{flex:"1"}},[a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"图像大小"}},[a("Input",{staticStyle:{width:"130px"},model:{value:t.uploadConfig.filesizetourists,callback:function(e){t.$set(t.uploadConfig,"filesizetourists",e)},expression:"uploadConfig.filesizetourists"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("Mb")])])],1)],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{flex:"1"}},[a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"上传最多"}},[a("Input",{staticStyle:{width:"130px"},model:{value:t.uploadConfig.imgcounttourists,callback:function(e){t.$set(t.uploadConfig,"imgcounttourists",e)},expression:"uploadConfig.imgcounttourists"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("张")])])],1)],1)],1)],1)],1)],1),a("Col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:"24"}},[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-contacts",size:"18"}}),t._v(" 用户相关设置")],1),a("Row",[a("Col",{attrs:{flex:"1"}},[a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"新用户分配"}},[a("Input",{staticStyle:{width:"130px"},model:{value:t.uploadConfig.usermemory,callback:function(e){t.$set(t.uploadConfig,"usermemory",e)},expression:"uploadConfig.usermemory"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("Mb")])])],1)],1)],1),a("Col",{attrs:{flex:"1"}},[a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"图像大小"}},[a("Input",{staticStyle:{width:"130px"},model:{value:t.uploadConfig.filesizeuser,callback:function(e){t.$set(t.uploadConfig,"filesizeuser",e)},expression:"uploadConfig.filesizeuser"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("Mb")])])],1)],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{flex:"1"}},[a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"上传最多"}},[a("Input",{staticStyle:{width:"130px"},model:{value:t.uploadConfig.imgcountuser,callback:function(e){t.$set(t.uploadConfig,"imgcountuser",e)},expression:"uploadConfig.imgcountuser"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("张")])])],1)],1)],1)],1)],1)],1)],1),a("Row",[a("Col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:"24"}},[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-cog",size:"18"}}),t._v(" 其他设置")],1),a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"图像格式","label-width":90}},[a("Input",{attrs:{placeholder:"请输入图像格式后缀用,隔开(英文逗号)"},model:{value:t.uploadConfig.suffix,callback:function(e){t.$set(t.uploadConfig,"suffix",e)},expression:"uploadConfig.suffix"}})],1),a("FormItem",{attrs:{label:"IP黑名单","label-width":90}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入要禁止上传的用户IP 用;隔开(英文分号)"},model:{value:t.uploadConfig.blacklist,callback:function(e){t.$set(t.uploadConfig,"blacklist",e)},expression:"uploadConfig.blacklist"}})],1)],1)],1)],1)],1)],1),a("TabPane",{attrs:{label:"站点配置",icon:"ios-bookmark"}},[a("Row",[a("Col",{staticStyle:{padding:"8px"},attrs:{flex:"1"}},[a("Card",{staticStyle:{"margin-top":"10px","padding-left":"8px","padding-right":"8px","padding-top":"20px"},attrs:{bordered:!0}},[a("Form",{staticStyle:{"min-width":"70px"}},[a("FormItem",{attrs:{label:"站点注册"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.registerSwitch,callback:function(e){t.registerSwitch=e},expression:"registerSwitch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("On")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("Off")])])],1)],1)],1)],1),a("Col",{staticStyle:{padding:"8px"},attrs:{flex:"1"}},[a("Card",{staticStyle:{"margin-top":"10px","padding-left":"8px","padding-right":"8px","padding-top":"20px"},attrs:{bordered:!0}},[a("Form",{staticStyle:{"min-width":"70px"}},[a("FormItem",{attrs:{label:"图像查重"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.checkduplicateSwitch,callback:function(e){t.checkduplicateSwitch=e},expression:"checkduplicateSwitch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("On")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("Off")])])],1)],1)],1)],1)],1),a("Row",[a("Col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:"24"}},[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-globe",size:"18"}}),t._v(" 站点信息")],1),a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"站点标题","label-width":90}},[a("Input",{staticStyle:{"max-width":"500px"},attrs:{maxlength:"50",placeholder:"请输入网站的标题"},model:{value:t.config.webname,callback:function(e){t.$set(t.config,"webname",e)},expression:"config.webname"}})],1),a("FormItem",{attrs:{label:"后端域名","label-width":90}},[a("Input",{staticStyle:{"max-width":"500px"},attrs:{maxlength:"100",placeholder:"请输入后端的服务域名或ip:port"},model:{value:t.config.domain,callback:function(e){t.$set(t.config,"domain",e)},expression:"config.domain"}})],1),a("FormItem",{attrs:{label:"站点副标题","label-width":90}},[a("Input",{staticStyle:{"max-width":"500px"},attrs:{maxlength:"100",placeholder:"请输入网站的副标题"},model:{value:t.config.websubtitle,callback:function(e){t.$set(t.config,"websubtitle",e)},expression:"config.websubtitle"}})],1),a("FormItem",{attrs:{label:"站点LOGO","label-width":90}},[a("Input",{attrs:{maxlength:"500",placeholder:"请输入LOGO链接"},model:{value:t.config.logo,callback:function(e){t.$set(t.config,"logo",e)},expression:"config.logo"}})],1),a("FormItem",{attrs:{label:"服务端图标","label-width":90}},[a("Input",{attrs:{maxlength:"500",placeholder:"请输入服务端的favicon图标URL地址"},model:{value:t.config.webfavicons,callback:function(e){t.$set(t.config,"webfavicons",e)},expression:"config.webfavicons"}})],1),a("FormItem",{attrs:{label:"站点关键词","label-width":90}},[a("Input",{attrs:{maxlength:"500",placeholder:"多个关键词用(英文)“ , ”隔开"},model:{value:t.config.webkeywords,callback:function(e){t.$set(t.config,"webkeywords",e)},expression:"config.webkeywords"}})],1),a("FormItem",{attrs:{label:"站点描述","label-width":90}},[a("Input",{attrs:{type:"textarea",rows:4,maxlength:"500",placeholder:"请输入站点描述文本"},model:{value:t.config.webms,callback:function(e){t.$set(t.config,"webms",e)},expression:"config.webms"}})],1),a("FormItem",{attrs:{label:"站内资讯","label-width":90}},[a("Input",{attrs:{type:"textarea",rows:4,maxlength:"500",placeholder:"请输入站内资讯/公告文本(留空则不显示,支持html标签)"},model:{value:t.config.explain,callback:function(e){t.$set(t.config,"explain",e)},expression:"config.explain"}})],1),a("FormItem",{attrs:{label:"关于弹窗","label-width":90}},[a("Input",{attrs:{type:"textarea",rows:4,maxlength:"500",placeholder:"请输入站内关于菜单的内容,支持html标签"},model:{value:t.config.aboutinfo,callback:function(e){t.$set(t.config,"aboutinfo",e)},expression:"config.aboutinfo"}})],1),a("FormItem",{attrs:{label:"备案显示","label-width":90}},[a("Input",{attrs:{type:"textarea",rows:4,maxlength:"5000",placeholder:"站点底部备案信息，不填写则不显示"},model:{value:t.config.links,callback:function(e){t.$set(t.config,"links",e)},expression:"config.links"}})],1)],1)],1)],1)],1)],1),a("TabPane",{attrs:{label:"客户端配置",icon:"md-desktop"}},[a("Row",[a("Col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:"24"}},[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-desktop",size:"18"}}),t._v(" 客户端配置")],1),a("Form",{staticStyle:{padding:"16px"}},[a("FormItem",{attrs:{label:"程序控制","label-width":110}},[a("Input",{staticStyle:{"max-width":"600px"},attrs:{clearable:"",maxlength:"50",placeholder:"on\\off（其他字符均为关闭）"},model:{value:t.appclient.isuse,callback:function(e){t.$set(t.appclient,"isuse",e)},expression:"appclient.isuse"}})],1),a("FormItem",{attrs:{label:"程序标题","label-width":110}},[a("Input",{staticStyle:{"max-width":"600px"},attrs:{clearable:"",maxlength:"20",placeholder:"程序主界面标题"},model:{value:t.appclient.appname,callback:function(e){t.$set(t.appclient,"appname",e)},expression:"appclient.appname"}})],1),a("FormItem",{attrs:{label:"标题LOGO","label-width":110}},[a("Input",{staticStyle:{"max-width":"600px"},attrs:{clearable:"",maxlength:"500",placeholder:"程序主界面图标，图像比例为1:1，如：300x300"},model:{value:t.appclient.applogo,callback:function(e){t.$set(t.appclient,"applogo",e)},expression:"appclient.applogo"}})],1),a("FormItem",{attrs:{label:"是否更新","label-width":110}},[a("Input",{staticStyle:{"max-width":"600px"},attrs:{clearable:"",maxlength:"50",placeholder:"on\\off（其他字符均为关闭）"},model:{value:t.appclient.appupdate,callback:function(e){t.$set(t.appclient,"appupdate",e)},expression:"appclient.appupdate"}})],1),a("FormItem",{attrs:{label:"新版地址(WIN)","label-width":110}},[a("Input",{staticStyle:{"max-width":"600px"},attrs:{clearable:"",maxlength:"500",placeholder:"新版本安装包下载地址"},model:{value:t.appclient.winpackurl,callback:function(e){t.$set(t.appclient,"winpackurl",e)},expression:"appclient.winpackurl"}})],1),a("FormItem",{attrs:{label:"新版地址(MAC)","label-width":110}},[a("Input",{staticStyle:{"max-width":"600px"},attrs:{clearable:"",maxlength:"500",placeholder:"新版本安装包下载地址"},model:{value:t.appclient.macpackurl,callback:function(e){t.$set(t.appclient,"macpackurl",e)},expression:"appclient.macpackurl"}})],1),a("FormItem",[a("p",[t._v("图床客户端程序可在"),a("a",{attrs:{target:"_blank",href:"http://tbed.hellohao.cn"}},[t._v("Hellohao图像托管官网")]),t._v("获取")]),a("p",{staticStyle:{"font-size":"12px",position:"absolute",color:"rgb(228 102 70)"}},[t._v("注意：欲要向用户推送新版本，需要将“是否更新”开启为on,然后填写新版本的下载地址。")])])],1)],1)],1)],1)],1)],1)],1),a("Footer",{staticClass:"layout-footer-center"},[t._v(t._s(this.$store.state.metaInfo.webname)+" © Control Panel")])],1)}),[],!1,null,"afaf433c",null);e.default=o.exports}}]);