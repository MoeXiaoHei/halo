(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-53a2eecc"],{1:function(t,e){},1311:function(t,e,a){},"1bab":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("8237");var i=a("2b0e"),s=a("4328"),o=a.n(s);function r(t,e,a){return new Promise((s,r)=>{let n={data:JSON.stringify(e)};var l="60000";null!=a&&(l=a+"");let d=parseInt(l);t=t+"?"+(new Date).getTime()+Math.random()+Math.ceil(-89999*Math.random()+99999),i.default.prototype.$http.post(t,o.a.stringify(n),{timeout:d}).then(t=>{s(t)}).catch(t=>{r(t)})})}},"1fe6":function(t,e,a){"use strict";a.r(e);var i=a("1bab"),s={name:"group",data:()=>({urls:null,isAdd:!1,loading:!1,pageNum:1,pageSize:10,total:0,formItem:{id:null,groupname:null,keyid:null,usertype:"0",compress:!1},bucketlist:[],columns:[{title:"分组",minWidth:200,key:"groupname"},{title:"存储策略",minWidth:200,key:"keyname"},{title:"用户组",minWidth:200,render:(t,e)=>1==e.row.usertype?t("span",{},"游客"):2==e.row.usertype?t("span",{},"用户"):3==e.row.usertype?t("span",{},"管理员"):t("span",{},"未指定")},{title:"操作",align:"center",width:120,key:"action",slot:"action"}],groupList:[]}),mounted(){this.$Spin.show(),this.getGroupList(),this.getStorage(),this.$Spin.hide()},methods:{toPageIndex(t){this.pageNum=t,this.getUserList()},toPageSize(t){console.log(t)},getGroupList(){this.loading=!0;var t={};t.pageNum=this.pageNum,t.pageSize=this.pageSize,Object(i.a)("/admin/root/getGroupList",t).then(t=>{if(200==t.status){var e=t.data.data.list;this.total=t.data.count,e.length>0?this.groupList=e:console.log("没有数据")}else this.$Message.error("请求时出现错误");this.loading=!1}).catch(t=>{this.loading=!1,console.log(t),this.$Message.error("服务器请求错误")})},getStorage(){Object(i.a)("/admin/getStorageName",{}).then(t=>{200==t.status&&(this.bucketlist=t.data.data)}).catch(t=>{console.log(t),this.$Message.error("服务器请求错误")})},showAdd(){this.urlType="add",this.formItem.id=null,this.formItem.groupname=null,this.formItem.keyid=null,this.formItem.usertype="0",this.formItem.compress=!1,this.isAdd=!0},showsettingGroup(t,e){this.urlType="edit",this.isAdd=!0,this.formItem.id=t.id,this.formItem.groupname=t.groupname,this.formItem.keyid=t.keyid,this.formItem.usertype=t.usertype.toString(),this.formItem.compress=1==t.compress},save(){"add"==this.urlType?this.urls="addGroup":this.urls="updateGroup",Object(i.a)("/admin/root/"+this.urls,this.formItem).then(t=>{200==t.status&&("200"==t.data.code?(this.$Message.success(t.data.info),this.getGroupList(),this.isAdd=!1):this.$Message.warning(t.data.info))}).catch(t=>{console.log(t),this.$Message.error("服务器请求错误")})},deleGroup(t){this.$Modal.confirm({title:"确认删除",content:"<p>您确认删除所选分组吗</p>",onOk:()=>{this.sendDeleGroup(t)},onCancel:()=>{}})},sendDeleGroup(t){this.loading=!0;var e={};if(null==t||""==t)return this.$Message.warning("所选数据丢失，不可操作"),!1;e.id=t,Object(i.a)("/admin/root/deleGroup",e).then(t=>{200==t.status?("200"==t.data.code?this.$Message.success(t.data.info):this.$Message.warning(t.data.info),this.getGroupList()):this.$Message.error("请求时出现错误"),this.loading=!1}).catch(t=>{this.loading=!1,console.log(t),this.$Message.error("服务器请求错误")})}}},o=(a("cc1c"),a("2877")),r=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{staticStyle:{"margin-top":"50px","margin-bottom":"50px"}},[a("Content",{style:{margin:"15px 20px 0"}},[a("p",{staticStyle:{position:"fixed",right:"58px","z-index":"1",bottom:"68px"}},[a("Button",{staticStyle:{"z-index":"1","margin-right":"8px","box-shadow":"rgba(0, 0, 0, 0.4) 0px 2px 6px 0px"},attrs:{type:"primary",shape:"circle",icon:"md-add-circle"},on:{click:t.showAdd}},[t._v("添 加")])],1),a("Card",{staticClass:"cardShadow",staticStyle:{"margin-top":"10px","padding-left":"8px","padding-right":"8px"}},[a("Table",{ref:"selection",attrs:{loading:t.loading,columns:t.columns,data:t.groupList},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row,s=e.index;return[a("Icon",{attrs:{type:"md-settings tablebut"},on:{click:function(e){return t.showsettingGroup(i,s)}}}),a("Icon",{attrs:{type:"md-trash tablebut"},on:{click:function(e){return t.deleGroup(i.id)}}})]}}])},[a("Switch",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})]),a("div",{staticStyle:{"margin-top":"20px"}},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize},on:{"on-change":t.toPageIndex,"on-page-size-change":t.toPageSize}})],1)],1)],1),a("Modal",{attrs:{"footer-hide":!0},model:{value:t.isAdd,callback:function(e){t.isAdd=e},expression:"isAdd"}},[a("br"),a("Form",{attrs:{"label-width":70},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"群组名称"}},[a("Input",{attrs:{disabled:1==t.formItem.id&&"edit"==t.urlType,placeholder:"群组名称",maxlength:"20",size:"large"},model:{value:t.formItem.groupname,callback:function(e){t.$set(t.formItem,"groupname",e)},expression:"formItem.groupname"}})],1),a("FormItem",{attrs:{label:"存储源"}},[a("Select",{attrs:{filterable:"",placeholder:"存储源",size:"large"},model:{value:t.formItem.keyid,callback:function(e){t.$set(t.formItem,"keyid",e)},expression:"formItem.keyid"}},t._l(t.bucketlist,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.keyname))])})),1)],1),a("FormItem",{attrs:{label:"用户组"}},[a("Select",{attrs:{disabled:1==t.formItem.id&&"edit"==t.urlType,placeholder:"用户组",size:"large"},model:{value:t.formItem.usertype,callback:function(e){t.$set(t.formItem,"usertype",e)},expression:"formItem.usertype"}},[a("Option",{attrs:{value:"0"}},[t._v("不指定")]),a("Option",{attrs:{value:"1"}},[t._v("游客")]),a("Option",{attrs:{value:"2"}},[t._v("用户")]),a("Option",{attrs:{value:"3"}},[t._v("管理员")])],1)],1),a("div",{staticStyle:{color:"rgb(228 102 70)","font-size":"12px","font-weight":"200"}},[a("p",[t._v("分发群组优先级判定：")]),a("p",[t._v("未指定用户组的分发群组且已经分配给指定用户使用的优先级最高，其次是设置有用户组的分发群组。若以上所属的分发群组都没有指定，则一律进默认群组。")]),a("br")]),a("Button",{attrs:{type:"primary",icon:"md-done-all",long:"",shape:"circle"},on:{click:t.save}},[t._v("保 存")])],1)],1),a("Footer",{staticClass:"layout-footer-center"},[t._v(t._s(this.$store.state.metaInfo.webname)+" © Control Panel")])],1)}),[],!1,null,null,null);e.default=r.exports},cc1c:function(t,e,a){"use strict";a("1311")}}]);